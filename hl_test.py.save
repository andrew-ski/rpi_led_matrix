import os
import time
import Adafruit_DHT
#import csv

DHT_SENSOR = Adafruit_DHT.DHT22
DHT_PIN = 21


#    f.write("Temperature,Humidity\r\n")
#try:
#    f = open('/home/pi/Projects/Matrix/hl_csv.csv', 'a+')
#    if os.stat('/home/pi/Projects/Matrix/hl_csv.csv').st_size == 0:
#            f.write('Date,Time,Temperature,Humidity\r\n')
#except:
#    pass

while True:
    humidity, temperature = Adafruit_DHT.read_retry(DHT_SENSOR, DHT_PIN)

    if humidity is not None and temperature is not None:
#        temperature = str(int(temperature))
#        humidity = str(int(humidity))
        with open("hl_csv.csv", "a+") as f:
          f.write(f"{temperature},{humidity}\r\n")
          print("Written")
          f.close()

    else:
        print("Failed to retrieve data from humidity sensor")
    close
    time.sleep(5)
